import{j as e,R as j,g as y,h as k,k as D,X as R,Y as E,T as U,l as b}from"./vendor-charts-Bp3-pUCH.js";import{r as l}from"./vendor-react-CXiJbH0b.js";import{u as L,s as f,S as F}from"./index-1thB5OX8.js";import{a7 as H,u as P,c as W,T as M}from"./vendor-ui-DZIkMbEy.js";import"./vendor-utils-CWRG567-.js";import"./vendor-pdf-BHURsPEW.js";import"./vendor-supabase-cfKfdWz3.js";const z="_container_1h53g_1",O="_header_1h53g_7",$="_title_1h53g_16",K="_subtitle_1h53g_25",V="_addBtn_1h53g_30",X="_categories_1h53g_49",Y="_categoryBtn_1h53g_56",q="_active_1h53g_73",J="_markersGrid_1h53g_79",Q="_markerCard_1h53g_86",Z="_selected_1h53g_100",ee="_markerHeader_1h53g_105",te="_markerName_1h53g_112",ne="_status_1h53g_117",ie="_normal_1h53g_128",ae="_high_1h53g_133",se="_low_1h53g_138",re="_markerValue_1h53g_143",oe="_value_1h53g_147",le="_unit_1h53g_153",de="_noData_1h53g_159",ce="_markerRange_1h53g_164",me="_miniChart_1h53g_169",he="_detailPanel_1h53g_174",ue="_markerDesc_1h53g_189",ge="_chartContainer_1h53g_194",pe="_premiumGate_1h53g_201",_e="_premiumCard_1h53g_209",xe="_lockIcon_1h53g_218",ve="_upgradeBtn_1h53g_251",je="_modalOverlay_1h53g_269",ye="_modal_1h53g_269",ke="_formGroup_1h53g_299",be="_markersInput_1h53g_319",fe="_categorySection_1h53g_324",Le="_inputGrid_1h53g_338",Ce="_inputItem_1h53g_344",Ne="_inputWithUnit_1h53g_351",Be="_modalActions_1h53g_373",we="_cancelBtn_1h53g_380",Se="_saveBtn_1h53g_394",n={container:z,header:O,title:$,subtitle:K,addBtn:V,categories:X,categoryBtn:Y,active:q,markersGrid:J,markerCard:Q,selected:Z,markerHeader:ee,markerName:te,status:ne,normal:ie,high:ae,low:se,markerValue:re,value:oe,unit:le,noData:de,markerRange:ce,miniChart:me,detailPanel:he,markerDesc:ue,chartContainer:ge,premiumGate:pe,premiumCard:_e,lockIcon:xe,upgradeBtn:ve,modalOverlay:je,modal:ye,formGroup:ke,markersInput:be,categorySection:fe,inputGrid:Le,inputItem:Ce,inputWithUnit:Ne,modalActions:Be,cancelBtn:we,saveBtn:Se},u={hormones:[{id:"igf1",name:"IGF-1",unit:"ng/mL",min:100,max:300,description:"Growth factor indicator"},{id:"testosterone",name:"Testosterone",unit:"ng/dL",min:300,max:1e3,description:"Primary male hormone"},{id:"free_t",name:"Free Testosterone",unit:"pg/mL",min:50,max:210,description:"Bioavailable testosterone"},{id:"estradiol",name:"Estradiol (E2)",unit:"pg/mL",min:10,max:40,description:"Estrogen level"},{id:"shbg",name:"SHBG",unit:"nmol/L",min:10,max:57,description:"Sex hormone binding globulin"},{id:"lh",name:"LH",unit:"mIU/mL",min:1.7,max:8.6,description:"Luteinizing hormone"},{id:"fsh",name:"FSH",unit:"mIU/mL",min:1.5,max:12.4,description:"Follicle stimulating hormone"},{id:"prolactin",name:"Prolactin",unit:"ng/mL",min:2,max:18,description:"Pituitary hormone"},{id:"cortisol",name:"Cortisol",unit:"mcg/dL",min:6,max:23,description:"Stress hormone"},{id:"thyroid_tsh",name:"TSH",unit:"mIU/L",min:.4,max:4,description:"Thyroid stimulating hormone"},{id:"thyroid_t3",name:"Free T3",unit:"pg/mL",min:2.3,max:4.2,description:"Active thyroid hormone"},{id:"thyroid_t4",name:"Free T4",unit:"ng/dL",min:.8,max:1.8,description:"Thyroid hormone"}],metabolic:[{id:"glucose",name:"Fasting Glucose",unit:"mg/dL",min:70,max:100,description:"Blood sugar level"},{id:"hba1c",name:"HbA1c",unit:"%",min:4,max:5.6,description:"3-month glucose average"},{id:"insulin",name:"Fasting Insulin",unit:"Î¼IU/mL",min:2.6,max:24.9,description:"Insulin level"},{id:"homa_ir",name:"HOMA-IR",unit:"",min:0,max:2.5,description:"Insulin resistance index"}],lipids:[{id:"cholesterol",name:"Total Cholesterol",unit:"mg/dL",min:0,max:200,description:"Total cholesterol"},{id:"ldl",name:"LDL",unit:"mg/dL",min:0,max:100,description:"Bad cholesterol"},{id:"hdl",name:"HDL",unit:"mg/dL",min:40,max:999,description:"Good cholesterol"},{id:"triglycerides",name:"Triglycerides",unit:"mg/dL",min:0,max:150,description:"Blood fats"}],liver:[{id:"alt",name:"ALT",unit:"U/L",min:7,max:56,description:"Liver enzyme"},{id:"ast",name:"AST",unit:"U/L",min:10,max:40,description:"Liver enzyme"},{id:"ggt",name:"GGT",unit:"U/L",min:9,max:48,description:"Liver enzyme"},{id:"albumin",name:"Albumin",unit:"g/dL",min:3.5,max:5.5,description:"Protein level"}],kidney:[{id:"creatinine",name:"Creatinine",unit:"mg/dL",min:.7,max:1.3,description:"Kidney function"},{id:"bun",name:"BUN",unit:"mg/dL",min:7,max:20,description:"Blood urea nitrogen"},{id:"egfr",name:"eGFR",unit:"mL/min",min:90,max:999,description:"Kidney filtration rate"}],blood:[{id:"hemoglobin",name:"Hemoglobin",unit:"g/dL",min:13.5,max:17.5,description:"Oxygen carrying capacity"},{id:"hematocrit",name:"Hematocrit",unit:"%",min:38.8,max:50,description:"Red blood cell percentage"},{id:"rbc",name:"RBC Count",unit:"M/uL",min:4.5,max:5.5,description:"Red blood cell count"},{id:"wbc",name:"WBC Count",unit:"K/uL",min:4.5,max:11,description:"White blood cell count"},{id:"platelets",name:"Platelets",unit:"K/uL",min:150,max:400,description:"Clotting cells"}]},Ge=({isPremium:g=!1})=>{const{user:d}=L(),[c,C]=l.useState([]),[Te,N]=l.useState(!0),[B,m]=l.useState(!1),[p,w]=l.useState("hormones"),[r,S]=l.useState(null),[o,h]=l.useState({date:new Date().toISOString().split("T")[0],values:{}});if(!g)return e.jsx("div",{className:n.premiumGate,children:e.jsxs("div",{className:n.premiumCard,children:[e.jsx(H,{size:48,className:n.lockIcon}),e.jsx("h2",{children:"Premium Feature"}),e.jsx("p",{children:"Blood Work Tracker is a premium feature that allows you to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Track 50+ blood markers over time"}),e.jsx("li",{children:"Visualize trends with interactive charts"}),e.jsx("li",{children:"Get alerts when values are out of range"}),e.jsx("li",{children:"Export reports for your doctor"}),e.jsx("li",{children:"Correlate with your peptide protocols"})]}),e.jsx("button",{className:n.upgradeBtn,children:"Upgrade to Premium"})]})});l.useEffect(()=>{d&&_()},[d]);const _=async()=>{try{const{data:t,error:i}=await f.from("blood_work").select("*").eq("user_id",d.id).order("test_date",{ascending:!1});if(i)throw i;C(t||[])}catch(t){console.error("Error fetching blood work:",t)}finally{N(!1)}},G=async()=>{try{const{error:t}=await f.from("blood_work").insert({user_id:d.id,test_date:o.date,values:o.values});if(t)throw t;m(!1),h({date:new Date().toISOString().split("T")[0],values:{}}),_()}catch(t){console.error("Error adding entry:",t)}},T=(t,i)=>t<i.min?"low":t>i.max?"high":"normal",x=t=>c.filter(i=>i.values&&i.values[t]).map(i=>({date:new Date(i.test_date).toLocaleDateString(),value:parseFloat(i.values[t])})).reverse(),I=u[p]||[];return e.jsxs("div",{className:n.container,children:[e.jsxs("div",{className:n.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:n.title,children:"Blood Work Tracker"}),e.jsx("p",{className:n.subtitle,children:"Track and visualize your lab results over time"})]}),e.jsxs("button",{className:n.addBtn,onClick:()=>m(!0),children:[e.jsx(P,{size:20}),"Add Results"]})]}),e.jsx("div",{className:n.categories,children:Object.keys(u).map(t=>e.jsx("button",{className:`${n.categoryBtn} ${p===t?n.active:""}`,onClick:()=>w(t),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx("div",{className:n.markersGrid,children:I.map(t=>{const a=c.find(A=>A.values?.[t.id])?.values?.[t.id],s=a?T(parseFloat(a),t):null,v=x(t.id);return e.jsxs("div",{className:`${n.markerCard} ${r?.id===t.id?n.selected:""}`,onClick:()=>S(t),children:[e.jsxs("div",{className:n.markerHeader,children:[e.jsx("span",{className:n.markerName,children:t.name}),s&&e.jsxs("span",{className:`${n.status} ${n[s]}`,children:[s==="high"&&e.jsx(W,{size:14}),s==="low"&&e.jsx(M,{size:14}),s.charAt(0).toUpperCase()+s.slice(1)]})]}),e.jsx("div",{className:n.markerValue,children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:n.value,children:a}),e.jsx("span",{className:n.unit,children:t.unit})]}):e.jsx("span",{className:n.noData,children:"No data"})}),e.jsxs("div",{className:n.markerRange,children:["Range: ",t.min," - ",t.max," ",t.unit]}),v.length>1&&e.jsx("div",{className:n.miniChart,children:e.jsx(j,{width:"100%",height:40,children:e.jsx(y,{data:v,children:e.jsx(k,{type:"monotone",dataKey:"value",stroke:"var(--accent-primary)",strokeWidth:2,dot:!1})})})})]},t.id)})}),r&&e.jsxs("div",{className:n.detailPanel,children:[e.jsxs("h2",{children:[r.name," History"]}),e.jsx("p",{className:n.markerDesc,children:r.description}),e.jsx("div",{className:n.chartContainer,children:e.jsx(j,{width:"100%",height:300,children:e.jsxs(y,{data:x(r.id),children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(R,{dataKey:"date",stroke:"var(--text-muted)"}),e.jsx(E,{stroke:"var(--text-muted)"}),e.jsx(U,{contentStyle:{background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"8px"}}),e.jsx(b,{y:r.min,stroke:"var(--warning)",strokeDasharray:"5 5",label:"Min"}),e.jsx(b,{y:r.max,stroke:"var(--warning)",strokeDasharray:"5 5",label:"Max"}),e.jsx(k,{type:"monotone",dataKey:"value",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)"}})]})})})]}),B&&e.jsx("div",{className:n.modalOverlay,onClick:()=>m(!1),children:e.jsxs("div",{className:n.modal,onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{children:"Add Blood Work Results"}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Test Date"}),e.jsx("input",{type:"date",value:o.date,onChange:t=>h({...o,date:t.target.value})})]}),e.jsx("div",{className:n.markersInput,children:Object.entries(u).map(([t,i])=>e.jsxs("div",{className:n.categorySection,children:[e.jsx("h3",{children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx("div",{className:n.inputGrid,children:i.map(a=>e.jsxs("div",{className:n.inputItem,children:[e.jsx("label",{children:a.name}),e.jsxs("div",{className:n.inputWithUnit,children:[e.jsx("input",{type:"number",step:"0.01",placeholder:`${a.min}-${a.max}`,value:o.values[a.id]||"",onChange:s=>h({...o,values:{...o.values,[a.id]:s.target.value}})}),e.jsx("span",{children:a.unit})]})]},a.id))})]},t))}),e.jsxs("div",{className:n.modalActions,children:[e.jsx("button",{className:n.cancelBtn,onClick:()=>m(!1),children:"Cancel"}),e.jsx("button",{className:n.saveBtn,onClick:G,children:"Save Results"})]})]})})]})},He=()=>{const{user:g,isPremium:d,loading:c}=L();return c?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Blood Work Tracker | Lab Results Monitoring",description:"Track your blood work results over time. Monitor IGF-1, testosterone, A1C, liver enzymes, and more with visual trends.",keywords:"blood work tracker, lab results, IGF-1, testosterone, peptide monitoring"}),e.jsx(Ge,{isPremium:d})]})};export{He as default};
