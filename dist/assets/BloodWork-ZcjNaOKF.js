import{j as e,ak as E,K as R,c as P,T as U,b9 as L,ba as C,bb as N,bc as F,bd as H,be as W,bf as M,bg as w}from"./ui-DVaorLqp.js";import{a as s}from"./vendor-Cpf5lK5_.js";import{u as B,s as j,S as z}from"./index-BpXnOfzg.js";import"./utils-tjIwna_n.js";const O="_container_1h53g_1",K="_header_1h53g_7",$="_title_1h53g_16",V="_subtitle_1h53g_25",q="_addBtn_1h53g_30",X="_categories_1h53g_49",Y="_categoryBtn_1h53g_56",J="_active_1h53g_73",Q="_markersGrid_1h53g_79",Z="_markerCard_1h53g_86",ee="_selected_1h53g_100",te="_markerHeader_1h53g_105",ne="_markerName_1h53g_112",ie="_status_1h53g_117",ae="_normal_1h53g_128",se="_high_1h53g_133",re="_low_1h53g_138",oe="_markerValue_1h53g_143",le="_value_1h53g_147",ce="_unit_1h53g_153",de="_noData_1h53g_159",me="_markerRange_1h53g_164",ue="_miniChart_1h53g_169",he="_detailPanel_1h53g_174",ge="_markerDesc_1h53g_189",pe="_chartContainer_1h53g_194",_e="_premiumGate_1h53g_201",xe="_premiumCard_1h53g_209",ve="_lockIcon_1h53g_218",je="_upgradeBtn_1h53g_251",ye="_modalOverlay_1h53g_269",ke="_modal_1h53g_269",be="_formGroup_1h53g_299",fe="_markersInput_1h53g_319",Le="_categorySection_1h53g_324",Ce="_inputGrid_1h53g_338",Ne="_inputItem_1h53g_344",we="_inputWithUnit_1h53g_351",Be="_modalActions_1h53g_373",Se="_cancelBtn_1h53g_380",Ge="_saveBtn_1h53g_394",n={container:O,header:K,title:$,subtitle:V,addBtn:q,categories:X,categoryBtn:Y,active:J,markersGrid:Q,markerCard:Z,selected:ee,markerHeader:te,markerName:ne,status:ie,normal:ae,high:se,low:re,markerValue:oe,value:le,unit:ce,noData:de,markerRange:me,miniChart:ue,detailPanel:he,markerDesc:ge,chartContainer:pe,premiumGate:_e,premiumCard:xe,lockIcon:ve,upgradeBtn:je,modalOverlay:ye,modal:ke,formGroup:be,markersInput:fe,categorySection:Le,inputGrid:Ce,inputItem:Ne,inputWithUnit:we,modalActions:Be,cancelBtn:Se,saveBtn:Ge},v={hormones:[{id:"igf1",name:"IGF-1",unit:"ng/mL",min:100,max:300,description:"Growth factor indicator"},{id:"testosterone",name:"Testosterone",unit:"ng/dL",min:300,max:1e3,description:"Primary male hormone"},{id:"free_t",name:"Free Testosterone",unit:"pg/mL",min:50,max:210,description:"Bioavailable testosterone"},{id:"estradiol",name:"Estradiol (E2)",unit:"pg/mL",min:10,max:40,description:"Estrogen level"},{id:"shbg",name:"SHBG",unit:"nmol/L",min:10,max:57,description:"Sex hormone binding globulin"},{id:"lh",name:"LH",unit:"mIU/mL",min:1.7,max:8.6,description:"Luteinizing hormone"},{id:"fsh",name:"FSH",unit:"mIU/mL",min:1.5,max:12.4,description:"Follicle stimulating hormone"},{id:"prolactin",name:"Prolactin",unit:"ng/mL",min:2,max:18,description:"Pituitary hormone"},{id:"cortisol",name:"Cortisol",unit:"mcg/dL",min:6,max:23,description:"Stress hormone"},{id:"thyroid_tsh",name:"TSH",unit:"mIU/L",min:.4,max:4,description:"Thyroid stimulating hormone"},{id:"thyroid_t3",name:"Free T3",unit:"pg/mL",min:2.3,max:4.2,description:"Active thyroid hormone"},{id:"thyroid_t4",name:"Free T4",unit:"ng/dL",min:.8,max:1.8,description:"Thyroid hormone"}],metabolic:[{id:"glucose",name:"Fasting Glucose",unit:"mg/dL",min:70,max:100,description:"Blood sugar level"},{id:"hba1c",name:"HbA1c",unit:"%",min:4,max:5.6,description:"3-month glucose average"},{id:"insulin",name:"Fasting Insulin",unit:"Î¼IU/mL",min:2.6,max:24.9,description:"Insulin level"},{id:"homa_ir",name:"HOMA-IR",unit:"",min:0,max:2.5,description:"Insulin resistance index"}],lipids:[{id:"cholesterol",name:"Total Cholesterol",unit:"mg/dL",min:0,max:200,description:"Total cholesterol"},{id:"ldl",name:"LDL",unit:"mg/dL",min:0,max:100,description:"Bad cholesterol"},{id:"hdl",name:"HDL",unit:"mg/dL",min:40,max:999,description:"Good cholesterol"},{id:"triglycerides",name:"Triglycerides",unit:"mg/dL",min:0,max:150,description:"Blood fats"}],liver:[{id:"alt",name:"ALT",unit:"U/L",min:7,max:56,description:"Liver enzyme"},{id:"ast",name:"AST",unit:"U/L",min:10,max:40,description:"Liver enzyme"},{id:"ggt",name:"GGT",unit:"U/L",min:9,max:48,description:"Liver enzyme"},{id:"albumin",name:"Albumin",unit:"g/dL",min:3.5,max:5.5,description:"Protein level"}],kidney:[{id:"creatinine",name:"Creatinine",unit:"mg/dL",min:.7,max:1.3,description:"Kidney function"},{id:"bun",name:"BUN",unit:"mg/dL",min:7,max:20,description:"Blood urea nitrogen"},{id:"egfr",name:"eGFR",unit:"mL/min",min:90,max:999,description:"Kidney filtration rate"}],blood:[{id:"hemoglobin",name:"Hemoglobin",unit:"g/dL",min:13.5,max:17.5,description:"Oxygen carrying capacity"},{id:"hematocrit",name:"Hematocrit",unit:"%",min:38.8,max:50,description:"Red blood cell percentage"},{id:"rbc",name:"RBC Count",unit:"M/uL",min:4.5,max:5.5,description:"Red blood cell count"},{id:"wbc",name:"WBC Count",unit:"K/uL",min:4.5,max:11,description:"White blood cell count"},{id:"platelets",name:"Platelets",unit:"K/uL",min:150,max:400,description:"Clotting cells"}]},Te=({isPremium:m=!1})=>{const{user:d}=B(),[h,p]=s.useState([]),[_,y]=s.useState(!0),[r,u]=s.useState(!1),[g,S]=s.useState("hormones"),[l,G]=s.useState(null),[c,x]=s.useState({date:new Date().toISOString().split("T")[0],values:{}});if(!m)return e.jsx("div",{className:n.premiumGate,children:e.jsxs("div",{className:n.premiumCard,children:[e.jsx(E,{size:48,className:n.lockIcon}),e.jsx("h2",{children:"Premium Feature"}),e.jsx("p",{children:"Blood Work Tracker is a premium feature that allows you to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Track 50+ blood markers over time"}),e.jsx("li",{children:"Visualize trends with interactive charts"}),e.jsx("li",{children:"Get alerts when values are out of range"}),e.jsx("li",{children:"Export reports for your doctor"}),e.jsx("li",{children:"Correlate with your peptide protocols"})]}),e.jsx("button",{className:n.upgradeBtn,children:"Upgrade to Premium"})]})});s.useEffect(()=>{d&&k()},[d]);const k=async()=>{try{const{data:t,error:i}=await j.from("blood_work").select("*").eq("user_id",d.id).order("test_date",{ascending:!1});if(i)throw i;p(t||[])}catch(t){console.error("Error fetching blood work:",t)}finally{y(!1)}},T=async()=>{try{const{error:t}=await j.from("blood_work").insert({user_id:d.id,test_date:c.date,values:c.values});if(t)throw t;u(!1),x({date:new Date().toISOString().split("T")[0],values:{}}),k()}catch(t){console.error("Error adding entry:",t)}},I=(t,i)=>t<i.min?"low":t>i.max?"high":"normal",b=t=>h.filter(i=>i.values&&i.values[t]).map(i=>({date:new Date(i.test_date).toLocaleDateString(),value:parseFloat(i.values[t])})).reverse(),A=v[g]||[];return e.jsxs("div",{className:n.container,children:[e.jsxs("div",{className:n.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:n.title,children:"Blood Work Tracker"}),e.jsx("p",{className:n.subtitle,children:"Track and visualize your lab results over time"})]}),e.jsxs("button",{className:n.addBtn,onClick:()=>u(!0),children:[e.jsx(R,{size:20}),"Add Results"]})]}),e.jsx("div",{className:n.categories,children:Object.keys(v).map(t=>e.jsx("button",{className:`${n.categoryBtn} ${g===t?n.active:""}`,onClick:()=>S(t),children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx("div",{className:n.markersGrid,children:A.map(t=>{const a=h.find(D=>D.values?.[t.id])?.values?.[t.id],o=a?I(parseFloat(a),t):null,f=b(t.id);return e.jsxs("div",{className:`${n.markerCard} ${l?.id===t.id?n.selected:""}`,onClick:()=>G(t),children:[e.jsxs("div",{className:n.markerHeader,children:[e.jsx("span",{className:n.markerName,children:t.name}),o&&e.jsxs("span",{className:`${n.status} ${n[o]}`,children:[o==="high"&&e.jsx(P,{size:14}),o==="low"&&e.jsx(U,{size:14}),o.charAt(0).toUpperCase()+o.slice(1)]})]}),e.jsx("div",{className:n.markerValue,children:a?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:n.value,children:a}),e.jsx("span",{className:n.unit,children:t.unit})]}):e.jsx("span",{className:n.noData,children:"No data"})}),e.jsxs("div",{className:n.markerRange,children:["Range: ",t.min," - ",t.max," ",t.unit]}),f.length>1&&e.jsx("div",{className:n.miniChart,children:e.jsx(L,{width:"100%",height:40,children:e.jsx(C,{data:f,children:e.jsx(N,{type:"monotone",dataKey:"value",stroke:"var(--accent-primary)",strokeWidth:2,dot:!1})})})})]},t.id)})}),l&&e.jsxs("div",{className:n.detailPanel,children:[e.jsxs("h2",{children:[l.name," History"]}),e.jsx("p",{className:n.markerDesc,children:l.description}),e.jsx("div",{className:n.chartContainer,children:e.jsx(L,{width:"100%",height:300,children:e.jsxs(C,{data:b(l.id),children:[e.jsx(F,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(H,{dataKey:"date",stroke:"var(--text-muted)"}),e.jsx(W,{stroke:"var(--text-muted)"}),e.jsx(M,{contentStyle:{background:"var(--glass-bg)",border:"1px solid var(--glass-border)",borderRadius:"8px"}}),e.jsx(w,{y:l.min,stroke:"var(--warning)",strokeDasharray:"5 5",label:"Min"}),e.jsx(w,{y:l.max,stroke:"var(--warning)",strokeDasharray:"5 5",label:"Max"}),e.jsx(N,{type:"monotone",dataKey:"value",stroke:"var(--accent-primary)",strokeWidth:2,dot:{fill:"var(--accent-primary)"}})]})})})]}),r&&e.jsx("div",{className:n.modalOverlay,onClick:()=>u(!1),children:e.jsxs("div",{className:n.modal,onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{children:"Add Blood Work Results"}),e.jsxs("div",{className:n.formGroup,children:[e.jsx("label",{children:"Test Date"}),e.jsx("input",{type:"date",value:c.date,onChange:t=>x({...c,date:t.target.value})})]}),e.jsx("div",{className:n.markersInput,children:Object.entries(v).map(([t,i])=>e.jsxs("div",{className:n.categorySection,children:[e.jsx("h3",{children:t.charAt(0).toUpperCase()+t.slice(1)}),e.jsx("div",{className:n.inputGrid,children:i.map(a=>e.jsxs("div",{className:n.inputItem,children:[e.jsx("label",{children:a.name}),e.jsxs("div",{className:n.inputWithUnit,children:[e.jsx("input",{type:"number",step:"0.01",placeholder:`${a.min}-${a.max}`,value:c.values[a.id]||"",onChange:o=>x({...c,values:{...c.values,[a.id]:o.target.value}})}),e.jsx("span",{children:a.unit})]})]},a.id))})]},t))}),e.jsxs("div",{className:n.modalActions,children:[e.jsx("button",{className:n.cancelBtn,onClick:()=>u(!1),children:"Cancel"}),e.jsx("button",{className:n.saveBtn,onClick:T,children:"Save Results"})]})]})})]})},Re=()=>{const{user:m}=B(),[d,h]=s.useState(!1),[p,_]=s.useState(!0);return s.useEffect(()=>{(async()=>{if(!m){_(!1);return}try{const{data:r,error:u}=await j.from("user_subscriptions").select("plan, status, current_period_end").eq("user_id",m.id).single();if(r&&r.status==="active"&&["premium","pro"].includes(r.plan)){const g=!r.current_period_end||new Date(r.current_period_end)>new Date;h(g)}}catch{console.log("No subscription found")}finally{_(!1)}})()},[m]),p?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Blood Work Tracker | Lab Results Monitoring",description:"Track your blood work results over time. Monitor IGF-1, testosterone, A1C, liver enzymes, and more with visual trends.",keywords:"blood work tracker, lab results, IGF-1, testosterone, peptide monitoring"}),e.jsx(Te,{isPremium:d})]})};export{Re as default};
