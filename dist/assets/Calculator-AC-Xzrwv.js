import{j as e,r as i}from"./vendor-C6dEa9Ot.js";import{P as w}from"./index-CljA_J8N.js";import{$ as V,a0 as Q,a1 as X,m as Z,a2 as ee,f as te,a3 as se,a4 as ne,b as ie,a5 as ae,a6 as oe}from"./icons-BiEmZ5UY.js";import"./charts-DMvJngN5.js";const re="_container_3bh71_1",le="_pageHeader_3bh71_11",ce="_headerLeft_3bh71_19",de="_headerIcon_3bh71_25",ue="_headerActions_3bh71_45",he="_iconBtn_3bh71_50",me="_iconBtnActive_3bh71_70",pe="_badge_3bh71_76",xe="_savedPanel_3bh71_91",ge="_noSaved_3bh71_103",_e="_savedList_3bh71_110",je="_savedItem_3bh71_116",be="_savedItemBtn_3bh71_121",ve="_savedPeptide_3bh71_140",fe="_savedDetails_3bh71_145",ye="_deleteBtn_3bh71_150",Ce="_inputGroup_3bh71_165",Ne="_label_3bh71_170",Be="_input_3bh71_165",ke="_inputWithUnit_3bh71_198",Se="_unitLabel_3bh71_208",Ae="_autocompleteWrapper_3bh71_217",we="_chevron_3bh71_221",Ue="_chevronUp_3bh71_231",We="_autocomplete_3bh71_217",Me="_autocompleteItem_3bh71_249",Ie="_peptideCategory_3bh71_271",Pe="_peptideHint_3bh71_279",De="_quickButtons_3bh71_286",Le="_quickBtn_3bh71_293",Te="_quickBtnActive_3bh71_310",$e="_recommendBtn_3bh71_316",qe="_doseInputRow_3bh71_332",Ge="_unitToggle_3bh71_341",Re="_unitBtn_3bh71_348",Ve="_unitBtnActive_3bh71_368",ze="_syringeTypes_3bh71_374",Ee="_syringeBtn_3bh71_380",Fe="_syringeBtnActive_3bh71_400",Oe="_resultContainer_3bh71_407",He="_warning_3bh71_417",Je="_resultCard_3bh71_428",Ye="_resultLabel_3bh71_433",Ke="_resultValue_3bh71_443",Qe="_resultWarning_3bh71_455",Xe="_resultUnit_3bh71_459",Ze="_details_3bh71_466",et="_detailRow_3bh71_475",tt="_dosesValue_3bh71_493",st="_saveBtn_3bh71_499",nt="_infoBox_3bh71_523",s={container:re,pageHeader:le,headerLeft:ce,headerIcon:de,headerActions:ue,iconBtn:he,iconBtnActive:me,badge:pe,savedPanel:xe,noSaved:ge,savedList:_e,savedItem:je,savedItemBtn:be,savedPeptide:ve,savedDetails:fe,deleteBtn:ye,inputGroup:Ce,label:Ne,input:Be,inputWithUnit:ke,unitLabel:Se,autocompleteWrapper:Ae,chevron:we,chevronUp:Ue,autocomplete:We,autocompleteItem:Me,peptideCategory:Ie,peptideHint:Pe,quickButtons:De,quickBtn:Le,quickBtnActive:Te,recommendBtn:$e,doseInputRow:qe,unitToggle:Ge,unitBtn:Re,unitBtnActive:Ve,syringeTypes:ze,syringeBtn:Ee,syringeBtnActive:Fe,resultContainer:Oe,warning:He,resultCard:Je,resultLabel:Ye,resultValue:Ke,resultWarning:Qe,resultUnit:Xe,details:Ze,detailRow:et,dosesValue:tt,saveBtn:st,infoBox:nt},it=({units:r,maxUnits:x=100})=>{const f=Math.min(Math.max(r,0),x),g=200,k=g/x,c=f*k;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px 20px"},children:[e.jsxs("svg",{width:"350",height:"140",viewBox:"0 0 350 140",style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3))"},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barrelGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.15)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(255, 255, 255, 0.05)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(255, 255, 255, 0.12)"})]}),e.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.8)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(59, 130, 246, 0.6)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(6, 182, 212, 0.7)"})]}),e.jsxs("linearGradient",{id:"plungerGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4b5563"}),e.jsx("stop",{offset:"50%",stopColor:"#374151"}),e.jsx("stop",{offset:"100%",stopColor:"#4b5563"})]}),e.jsxs("linearGradient",{id:"needleGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9ca3af"}),e.jsx("stop",{offset:"50%",stopColor:"#d1d5db"}),e.jsx("stop",{offset:"100%",stopColor:"#6b7280"})]}),e.jsxs("linearGradient",{id:"reflection",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.4)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(255, 255, 255, 0)"})]})]}),e.jsxs("g",{children:[e.jsx("rect",{x:"35",y:"58",width:"20",height:"24",rx:"2",fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"1"}),e.jsx("polygon",{points:"10,68 10,72 35,70",fill:"url(#needleGradient)",stroke:"#6b7280",strokeWidth:"0.5"}),e.jsx("polygon",{points:"8,70 10,68 10,72",fill:"#4b5563"}),e.jsx("line",{x1:"12",y1:"69",x2:"33",y2:"69.5",stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:"0.5"})]}),e.jsx("rect",{x:"55",y:"45",width:"220",height:"50",rx:"6",fill:"url(#barrelGradient)",stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"2"}),e.jsx("rect",{x:"60",y:"52",width:"210",height:"36",rx:"3",fill:"rgba(0, 0, 0, 0.2)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"}),Array.from({length:11}).map((U,d)=>{const l=60+d*(g/10),u=d%2===0;return e.jsxs("g",{children:[e.jsx("line",{x1:l,y1:u?45:48,x2:l,y2:"52",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:u?"1.5":"1"}),u&&e.jsx("text",{x:l,y:"40",fontSize:"11",fontWeight:"600",fill:"var(--text-secondary)",textAnchor:"middle",fontFamily:"Inter, sans-serif",children:d*10})]},d)}),c>0&&e.jsxs("g",{children:[e.jsx("rect",{x:"60",y:"53",width:c,height:"34",rx:"2",fill:"url(#liquidGradient)"}),e.jsx("rect",{x:"60",y:"53",width:c,height:"12",rx:"2",fill:"url(#reflection)",opacity:"0.6"}),e.jsx("ellipse",{cx:60+c,cy:"70",rx:"3",ry:"15",fill:"rgba(59, 130, 246, 0.3)"})]}),e.jsx("rect",{x:"58",y:"48",width:"214",height:"18",rx:"4",fill:"url(#reflection)",opacity:"0.3"}),e.jsxs("g",{transform:`translate(${c}, 0)`,children:[e.jsx("rect",{x:"60",y:"54",width:"6",height:"32",rx:"1",fill:"url(#plungerGradient)"}),e.jsx("rect",{x:"66",y:"67",width:"50",height:"6",rx:"3",fill:"#6b7280",stroke:"#4b5563",strokeWidth:"1"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"116",cy:"70",r:"16",fill:"#374151",stroke:"#4b5563",strokeWidth:"2"}),e.jsx("circle",{cx:"116",cy:"70",r:"12",fill:"#1f2937"}),e.jsx("circle",{cx:"116",cy:"70",r:"8",fill:"none",stroke:"#4b5563",strokeWidth:"1"}),e.jsx("circle",{cx:"116",cy:"70",r:"5",fill:"none",stroke:"#4b5563",strokeWidth:"0.5"})]})]}),e.jsxs("g",{children:[e.jsx("rect",{x:"268",y:"40",width:"4",height:"60",rx:"2",fill:"rgba(255, 255, 255, 0.2)"}),e.jsx("rect",{x:"273",y:"40",width:"4",height:"60",rx:"2",fill:"rgba(255, 255, 255, 0.2)"})]})]}),e.jsxs("div",{style:{marginTop:"20px",fontSize:"1.25rem",fontWeight:"700",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"0.02em"},children:[f.toFixed(1)," Units"]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"4px"},children:"Draw to this mark on your syringe"})]})},L="peptide_saved_calculations",z=Object.keys(w),D=[{id:"u100",name:"U-100 (1ml)",unitsPerMl:100,maxUnits:100},{id:"u50",name:"U-50 (0.5ml)",unitsPerMl:100,maxUnits:50},{id:"u40",name:"U-40",unitsPerMl:40,maxUnits:40}],at=[.5,1,1.5,2,2.5,3],ot=()=>{try{const r=localStorage.getItem(L);return r?JSON.parse(r):[]}catch{return[]}},rt=()=>{const[r,x]=i.useState(""),[f,g]=i.useState("5"),[k,c]=i.useState("2"),[U,d]=i.useState("250"),[l,u]=i.useState("mcg"),[y,W]=i.useState("u100"),_=parseFloat(f)||0,C=parseFloat(k)||0,m=parseFloat(U)||0,[T,M]=i.useState(!1),[v,$]=i.useState(ot),[I,q]=i.useState(!1),P=i.useRef(null),G=i.useMemo(()=>{if(!r)return z.slice(0,8);const t=r.toLowerCase();return z.filter(n=>n.toLowerCase().includes(t)).slice(0,8)},[r]),N=i.useMemo(()=>w[r]||null,[r]),E=i.useMemo(()=>{if(!N)return[100,250,500,1e3];const t=N.commonDosage||"",n=t.match(/(\d+(?:\.\d+)?)/g);if(n&&n.length>0){const a=n.map(o=>parseFloat(o));return a[0]<10&&t.toLowerCase().includes("mg")?a.map(o=>o*1e3):a}return[100,250,500,1e3]},[N]);i.useEffect(()=>{const t=n=>{P.current&&!P.current.contains(n.target)&&M(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const h=i.useMemo(()=>{if(_<=0||C<=0||m<=0)return null;const t=D.find(R=>R.id===y),n=t?.unitsPerMl||100,a=t?.maxUnits||100,o=l==="mg"?m*1e3:m,p=_*1e3,S=p/C,j=o/S,b=j*n,B=Math.floor(p/o),A=b>a;return{concentration:S,drawMl:j.toFixed(4),units:b.toFixed(1),dosesPerVial:B,isOverMax:A,maxUnits:a}},[_,C,m,l,y]),F=t=>{x(t),M(!1);const n=w[t];if(n){const a=n.commonDosage||"",o=a.match(/(\d+(?:\.\d+)?)/g);if(o&&o.length>0){const p=parseFloat(o[0]);a.toLowerCase().includes("mg")&&p<10?(d(String(p)),u("mg")):(d(String(p)),u("mcg"))}}},O=()=>{const n=[{id:Date.now(),peptide:r||"Custom",vialAmount:_,waterAmount:C,doseAmount:m,doseUnit:l,syringeType:y},...v.slice(0,9)];$(n),localStorage.setItem(L,JSON.stringify(n))},H=t=>{x(t.peptide),g(String(t.vialAmount)),c(String(t.waterAmount)),d(String(t.doseAmount)),u(t.doseUnit||"mcg"),W(t.syringeType||"u100"),q(!1)},J=t=>{const n=v.filter(a=>a.id!==t);$(n),localStorage.setItem(L,JSON.stringify(n))},Y=()=>{x(""),g("5"),c("2"),d("250"),u("mcg"),W("u100")},K=()=>{if(_<=0||m<=0)return;const t=D.find(b=>b.id===y),n=t?.unitsPerMl||100,a=t?.maxUnits||100,o=l==="mg"?m*1e3:m,p=_*1e3,S=[10,20,25,50,5,15,30,40];let j=null;for(const b of S){if(b>a)continue;const B=p*b/(o*n);if(B>=.5&&B<=3){const A=Math.round(B*10)/10;if(o/(p/A)*n<=a){j=A;break}}}j||(j=2),c(String(j))};return e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.pageHeader,children:[e.jsxs("div",{className:s.headerLeft,children:[e.jsx(V,{size:28,className:s.headerIcon}),e.jsxs("div",{children:[e.jsx("h1",{children:"Reconstitution Calculator"}),e.jsx("p",{children:"Calculate exact syringe draw volumes"})]})]}),e.jsxs("div",{className:s.headerActions,children:[e.jsxs("button",{className:`${s.iconBtn} ${I?s.iconBtnActive:""}`,onClick:()=>q(!I),title:"Saved calculations",children:[e.jsx(Q,{size:20}),v.length>0&&e.jsx("span",{className:s.badge,children:v.length})]}),e.jsx("button",{className:s.iconBtn,onClick:Y,title:"Reset",children:e.jsx(X,{size:20})})]})]}),I&&e.jsxs("div",{className:`card glass-panel ${s.savedPanel}`,children:[e.jsx("h3",{children:"Saved Calculations"}),v.length===0?e.jsx("p",{className:s.noSaved,children:"No saved calculations yet"}):e.jsx("div",{className:s.savedList,children:v.map(t=>e.jsxs("div",{className:s.savedItem,children:[e.jsxs("button",{className:s.savedItemBtn,onClick:()=>H(t),children:[e.jsx("span",{className:s.savedPeptide,children:t.peptide}),e.jsxs("span",{className:s.savedDetails,children:[t.vialAmount,"mg / ",t.waterAmount,"ml → ",t.doseAmount,t.doseUnit]})]}),e.jsx("button",{className:s.deleteBtn,onClick:()=>J(t.id),children:e.jsx(Z,{size:16})})]},t.id))})]}),e.jsxs("div",{className:"card glass-panel",children:[e.jsxs("div",{className:s.inputGroup,ref:P,children:[e.jsxs("label",{className:s.label,children:[e.jsx(ee,{size:16}),"Peptide"]}),e.jsxs("div",{className:s.autocompleteWrapper,children:[e.jsx("input",{type:"text",placeholder:"Search or type peptide name...",value:r,onChange:t=>x(t.target.value),onFocus:()=>M(!0),className:s.input,autoComplete:"off"}),e.jsx(te,{size:18,className:`${s.chevron} ${T?s.chevronUp:""}`}),T&&G.length>0&&e.jsx("div",{className:s.autocomplete,children:G.map(t=>e.jsxs("button",{type:"button",className:s.autocompleteItem,onClick:()=>F(t),children:[e.jsx("span",{children:t}),e.jsx("span",{className:s.peptideCategory,children:w[t]?.category})]},t))})]}),N&&e.jsxs("p",{className:s.peptideHint,children:["Common: ",N.commonDosage]})]}),e.jsxs("div",{className:s.inputGroup,children:[e.jsxs("label",{className:s.label,children:[e.jsx(V,{size:16}),"Vial Quantity"]}),e.jsxs("div",{className:s.inputWithUnit,children:[e.jsx("input",{type:"number",value:f,onChange:t=>g(t.target.value),onWheel:t=>t.target.blur(),step:"1",min:"0",className:s.input}),e.jsx("span",{className:s.unitLabel,children:"mg"})]}),e.jsx("div",{className:s.quickButtons,children:[5,10,15,20].map(t=>e.jsxs("button",{className:`${s.quickBtn} ${_===t?s.quickBtnActive:""}`,onClick:()=>g(String(t)),children:[t,"mg"]},t))})]}),e.jsxs("div",{className:s.inputGroup,children:[e.jsxs("label",{className:s.label,children:[e.jsx(se,{size:16}),"Bacteriostatic Water"]}),e.jsxs("div",{className:s.inputWithUnit,children:[e.jsx("input",{type:"number",value:k,onChange:t=>c(t.target.value),onWheel:t=>t.target.blur(),step:"0.5",min:"0",className:s.input}),e.jsx("span",{className:s.unitLabel,children:"ml"})]}),e.jsxs("div",{className:s.quickButtons,children:[at.map(t=>e.jsxs("button",{className:`${s.quickBtn} ${C===t?s.quickBtnActive:""}`,onClick:()=>c(String(t)),children:[t,"ml"]},t)),e.jsxs("button",{className:`${s.quickBtn} ${s.recommendBtn}`,onClick:K,title:"Calculate optimal water for easy-to-read syringe marks",children:[e.jsx(ne,{size:14}),"Recommend"]})]})]}),e.jsxs("div",{className:s.inputGroup,children:[e.jsxs("label",{className:s.label,children:[e.jsx(ie,{size:16}),"Desired Dose"]}),e.jsxs("div",{className:s.doseInputRow,children:[e.jsx("input",{type:"number",value:U,onChange:t=>d(t.target.value),onWheel:t=>t.target.blur(),step:l==="mg"?"0.1":"50",min:"0",className:s.input}),e.jsxs("div",{className:s.unitToggle,children:[e.jsx("button",{className:`${s.unitBtn} ${l==="mcg"?s.unitBtnActive:""}`,onClick:()=>u("mcg"),children:"mcg"}),e.jsx("button",{className:`${s.unitBtn} ${l==="mg"?s.unitBtnActive:""}`,onClick:()=>u("mg"),children:"mg"})]})]}),e.jsx("div",{className:s.quickButtons,children:E.map(t=>e.jsx("button",{className:`${s.quickBtn} ${m===t&&l==="mcg"?s.quickBtnActive:""}`,onClick:()=>{d(String(t)),u("mcg")},children:t>=1e3?`${t/1e3}mg`:`${t}mcg`},t))})]}),e.jsxs("div",{className:s.inputGroup,children:[e.jsx("label",{className:s.label,children:"Syringe Type"}),e.jsx("div",{className:s.syringeTypes,children:D.map(t=>e.jsx("button",{className:`${s.syringeBtn} ${y===t.id?s.syringeBtnActive:""}`,onClick:()=>W(t.id),children:t.name},t.id))})]}),h&&e.jsxs("div",{className:s.resultContainer,children:[h.isOverMax&&e.jsxs("div",{className:s.warning,children:["⚠️ Dose exceeds syringe capacity (",h.maxUnits," units max). Use more water or a larger syringe."]}),e.jsxs("div",{className:s.resultCard,children:[e.jsx("span",{className:s.resultLabel,children:"Draw to Tick Mark"}),e.jsx("span",{className:`${s.resultValue} ${h.isOverMax?s.resultWarning:""}`,children:h.units}),e.jsx("span",{className:s.resultUnit,children:"Units"})]}),e.jsx(it,{units:Math.min(parseFloat(h.units),h.maxUnits),maxUnits:h.maxUnits}),e.jsxs("div",{className:s.details,children:[e.jsxs("div",{className:s.detailRow,children:[e.jsx("span",{children:"Volume to Draw:"}),e.jsxs("span",{children:[h.drawMl," ml"]})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("span",{children:"Concentration:"}),e.jsxs("span",{children:[h.concentration.toFixed(1)," mcg/ml"]})]}),e.jsxs("div",{className:s.detailRow,children:[e.jsx("span",{children:"Doses per Vial:"}),e.jsxs("span",{className:s.dosesValue,children:[h.dosesPerVial," doses"]})]})]}),e.jsxs("button",{className:s.saveBtn,onClick:O,children:[e.jsx(ae,{size:18}),"Save This Calculation"]})]})]}),e.jsxs("div",{className:s.infoBox,children:[e.jsx(oe,{size:16}),e.jsxs("div",{children:[e.jsx("strong",{children:"U-100 Insulin Syringe:"})," Most common. 100 units = 1ml.",e.jsx("br",{}),e.jsx("strong",{children:"Tip:"})," Add a little extra BAC water for easier dosing."]})]})]})},ht=()=>e.jsx("div",{className:"padding-container",style:{padding:"20px"},children:e.jsx(rt,{})});export{ht as default};
