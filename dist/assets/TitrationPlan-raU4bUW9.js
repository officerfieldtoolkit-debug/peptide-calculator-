import{j as e}from"./vendor-charts-Bp3-pUCH.js";import{r}from"./vendor-react-CXiJbH0b.js";import{u as N,S as I,s as W}from"./index-BaP2a1uH.js";import{a5 as B,_ as G,q as T,p as $,k as F,a0 as L,aH as A}from"./vendor-ui-B-wdf7Pe.js";import"./vendor-utils-CWRG567-.js";import"./vendor-pdf-Dw_D6ZzP.js";import"./vendor-supabase-cfKfdWz3.js";const z="_container_i3ns2_1",E="_header_i3ns2_7",M="_title_i3ns2_16",O="_subtitle_i3ns2_25",q="_exportBtn_i3ns2_30",H="_setupGrid_i3ns2_49",R="_setupCard_i3ns2_56",U="_select_i3ns2_72",V="_dateInput_i3ns2_73",K="_drugCategory_i3ns2_84",Y="_protocolDesc_i3ns2_85",Z="_weightInputs_i3ns2_90",J="_arrow_i3ns2_117",Q="_weightDiff_i3ns2_122",X="_timeline_i3ns2_129",ee="_steps_i3ns2_144",te="_stepCard_i3ns2_158",se="_past_i3ns2_166",ne="_current_i3ns2_170",ae="_stepIndicator_i3ns2_174",oe="_currentDot_i3ns2_203",re="_stepContent_i3ns2_223",ie="_stepHeader_i3ns2_236",ce="_stepDose_i3ns2_243",de="_stepWeek_i3ns2_249",le="_stepDates_i3ns2_258",ue="_stepNotes_i3ns2_267",pe="_currentBadge_i3ns2_273",me="_infoBox_i3ns2_287",he="_premiumGate_i3ns2_321",ge="_premiumCard_i3ns2_329",_e="_lockIcon_i3ns2_338",xe="_upgradeBtn_i3ns2_367",s={container:z,header:E,title:M,subtitle:O,exportBtn:q,setupGrid:H,setupCard:R,select:U,dateInput:V,drugCategory:K,protocolDesc:Y,weightInputs:Z,arrow:J,weightDiff:Q,timeline:X,steps:ee,stepCard:te,past:se,current:ne,stepIndicator:ae,currentDot:oe,stepContent:re,stepHeader:ie,stepDose:ce,stepWeek:de,stepDates:le,stepNotes:ue,currentBadge:pe,infoBox:me,premiumGate:he,premiumCard:ge,lockIcon:_e,upgradeBtn:xe},v={semaglutide:{name:"Semaglutide (Ozempic/Wegovy)",category:"GLP-1 Agonist",frequency:"Weekly",protocols:[{name:"Standard FDA Protocol",description:"FDA-approved escalation for weight management",steps:[{week:1,duration:4,dose:.25,unit:"mg",notes:"Starting dose - expect some nausea"},{week:5,duration:4,dose:.5,unit:"mg",notes:"First increase"},{week:9,duration:4,dose:1,unit:"mg",notes:"Therapeutic dose"},{week:13,duration:4,dose:1.7,unit:"mg",notes:"Optional increase"},{week:17,duration:0,dose:2.4,unit:"mg",notes:"Maximum dose"}]},{name:"Slow Titration",description:"For those sensitive to GI effects",steps:[{week:1,duration:6,dose:.25,unit:"mg",notes:"Extended starting phase"},{week:7,duration:6,dose:.5,unit:"mg",notes:"Gradual increase"},{week:13,duration:0,dose:1,unit:"mg",notes:"May stay here long-term"}]}]},tirzepatide:{name:"Tirzepatide (Mounjaro/Zepbound)",category:"GIP/GLP-1 Dual Agonist",frequency:"Weekly",protocols:[{name:"Standard Protocol",description:"FDA-approved titration",steps:[{week:1,duration:4,dose:2.5,unit:"mg",notes:"Starting dose"},{week:5,duration:4,dose:5,unit:"mg",notes:"First therapeutic dose"},{week:9,duration:4,dose:7.5,unit:"mg",notes:"Increase if tolerated"},{week:13,duration:4,dose:10,unit:"mg",notes:"Strong therapeutic dose"},{week:17,duration:4,dose:12.5,unit:"mg",notes:"Near maximum"},{week:21,duration:0,dose:15,unit:"mg",notes:"Maximum approved dose"}]}]},liraglutide:{name:"Liraglutide (Saxenda)",category:"GLP-1 Agonist",frequency:"Daily",protocols:[{name:"Standard Daily Protocol",description:"FDA-approved daily titration",steps:[{week:1,duration:1,dose:.6,unit:"mg",notes:"Week 1"},{week:2,duration:1,dose:1.2,unit:"mg",notes:"Week 2"},{week:3,duration:1,dose:1.8,unit:"mg",notes:"Week 3"},{week:4,duration:1,dose:2.4,unit:"mg",notes:"Week 4"},{week:5,duration:0,dose:3,unit:"mg",notes:"Maintenance dose"}]}]},retatrutide:{name:"Retatrutide",category:"Triple Agonist",frequency:"Weekly",protocols:[{name:"Clinical Trial Protocol",description:"Based on phase 2 trial escalation",steps:[{week:1,duration:4,dose:1,unit:"mg",notes:"Low starting dose"},{week:5,duration:4,dose:2,unit:"mg",notes:"First increase"},{week:9,duration:4,dose:4,unit:"mg",notes:"Mid-range dose"},{week:13,duration:4,dose:8,unit:"mg",notes:"Higher dose"},{week:17,duration:0,dose:12,unit:"mg",notes:"Maximum studied"}]}]},mk677:{name:"MK-677 (Ibutamoren)",category:"GH Secretagogue",frequency:"Daily (Oral)",protocols:[{name:"Standard Protocol",description:"Common dosing approach",steps:[{week:1,duration:2,dose:12.5,unit:"mg",notes:"Half dose to assess tolerance"},{week:3,duration:0,dose:25,unit:"mg",notes:"Full dose - take at night"}]},{name:"Low Dose Protocol",description:"For those experiencing side effects",steps:[{week:1,duration:0,dose:10,unit:"mg",notes:"Lower dose, fewer sides"}]}]}},je=({isPremium:l=!1})=>{const{user:w}=N(),[u,x]=r.useState("semaglutide"),[p,j]=r.useState(0),[a,f]=r.useState(new Date().toISOString().split("T")[0]),[i,C]=r.useState(""),[_,S]=r.useState("");if(!l)return e.jsx("div",{className:s.premiumGate,children:e.jsxs("div",{className:s.premiumCard,children:[e.jsx(B,{size:48,className:s.lockIcon}),e.jsx("h2",{children:"Premium Feature"}),e.jsx("p",{children:"Titration Planner is a premium feature that helps you:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Plan your dose escalation schedule"}),e.jsx("li",{children:"Get calendar reminders for dose changes"}),e.jsx("li",{children:"Track your progress and adjust as needed"}),e.jsx("li",{children:"Export your plan to share with your doctor"}),e.jsx("li",{children:"Access FDA-approved and alternative protocols"})]}),e.jsx("button",{className:s.upgradeBtn,children:"Upgrade to Premium"})]})});const m=v[u],h=m.protocols[p],k=r.useMemo(()=>{const t=[];let n=new Date(a);return h.steps.forEach((c,d)=>{const o=new Date(n),b=c.duration>0?new Date(n.setDate(n.getDate()+c.duration*7-1)):null;t.push({...c,startDate:o,endDate:b,weekNumber:c.week,isFirst:d===0,isLast:d===h.steps.length-1}),c.duration>0&&(n=new Date(n.setDate(n.getDate()+1)))}),t},[a,h]),g=t=>t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=t=>{const n=new Date;return t.endDate?n>=t.startDate&&n<=t.endDate:n>=t.startDate},y=t=>{const n=new Date;return t.endDate?n>t.endDate:!1},P=()=>{const t=`${m.name} Titration Plan
Protocol: ${h.name}
Start Date: ${g(new Date(a))}

`+k.map(o=>`Week ${o.weekNumber}: ${o.dose}${o.unit} - Starting ${g(o.startDate)}`+(o.endDate?` to ${g(o.endDate)}`:" (ongoing)")+`
  Notes: ${o.notes}`).join(`

`),n=new Blob([t],{type:"text/plain"}),c=URL.createObjectURL(n),d=document.createElement("a");d.href=c,d.download=`titration-plan-${u}.txt`,d.click()};return e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:s.title,children:"Titration Planner"}),e.jsx("p",{className:s.subtitle,children:"Plan and track your dose escalation schedule"})]}),e.jsxs("button",{className:s.exportBtn,onClick:P,children:[e.jsx(G,{size:18}),"Export Plan"]})]}),e.jsxs("div",{className:s.setupGrid,children:[e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Select Medication"}),e.jsx("select",{value:u,onChange:t=>{x(t.target.value),j(0)},className:s.select,children:Object.entries(v).map(([t,n])=>e.jsx("option",{value:t,children:n.name},t))}),e.jsxs("span",{className:s.drugCategory,children:[m.category," • ",m.frequency]})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Select Protocol"}),e.jsx("select",{value:p,onChange:t=>j(parseInt(t.target.value)),className:s.select,children:m.protocols.map((t,n)=>e.jsx("option",{value:n,children:t.name},n))}),e.jsx("span",{className:s.protocolDesc,children:h.description})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Start Date"}),e.jsx("input",{type:"date",value:a,onChange:t=>f(t.target.value),className:s.dateInput})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Weight Tracking (Optional)"}),e.jsxs("div",{className:s.weightInputs,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Current"}),e.jsx("input",{type:"number",placeholder:"lbs",value:i,onChange:t=>C(t.target.value)})]}),e.jsx(T,{size:20,className:s.arrow}),e.jsxs("div",{children:[e.jsx("label",{children:"Goal"}),e.jsx("input",{type:"number",placeholder:"lbs",value:_,onChange:t=>S(t.target.value)})]})]}),i&&_&&e.jsxs("span",{className:s.weightDiff,children:["Target loss: ",i-_," lbs (",Math.round((i-_)/i*100),"%)"]})]})]}),e.jsxs("div",{className:s.timeline,children:[e.jsx("h2",{children:"Your Titration Schedule"}),e.jsx("div",{className:s.steps,children:k.map((t,n)=>e.jsxs("div",{className:`${s.stepCard} ${D(t)?s.current:""} ${y(t)?s.past:""}`,children:[e.jsx("div",{className:s.stepIndicator,children:y(t)?e.jsx($,{size:16}):D(t)?e.jsx("div",{className:s.currentDot}):e.jsx("span",{children:n+1})}),e.jsxs("div",{className:s.stepContent,children:[e.jsxs("div",{className:s.stepHeader,children:[e.jsxs("span",{className:s.stepDose,children:[t.dose," ",t.unit]}),e.jsxs("span",{className:s.stepWeek,children:["Week ",t.weekNumber,t.duration>0?`-${t.weekNumber+t.duration-1}`:"+"]})]}),e.jsxs("div",{className:s.stepDates,children:[e.jsx(F,{size:14}),g(t.startDate),t.endDate&&` → ${g(t.endDate)}`,!t.endDate&&" → Ongoing"]}),e.jsx("p",{className:s.stepNotes,children:t.notes}),D(t)&&e.jsxs("div",{className:s.currentBadge,children:[e.jsx(L,{size:14}),"Current Phase"]})]})]},n))})]}),e.jsxs("div",{className:s.infoBox,children:[e.jsx(A,{size:20}),e.jsxs("div",{children:[e.jsx("h4",{children:"Important Reminders"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Only increase dose if you're tolerating current dose well"}),e.jsx("li",{children:"Stay at current dose longer if experiencing significant side effects"}),e.jsx("li",{children:"Consult your healthcare provider before making changes"}),e.jsx("li",{children:"This planner is for reference only - follow your provider's guidance"})]})]})]})]})},Ce=()=>{const{user:l}=N(),[w,u]=r.useState(!1),[x,p]=r.useState(!0);return r.useEffect(()=>{(async()=>{if(!l){p(!1);return}try{const{data:a,error:f}=await W.from("user_subscriptions").select("plan, status, current_period_end").eq("user_id",l.id).single();if(a&&a.status==="active"&&["premium","pro"].includes(a.plan)){const i=!a.current_period_end||new Date(a.current_period_end)>new Date;u(i)}}catch{console.log("No subscription found")}finally{p(!1)}})()},[l]),x?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Titration Planner | Dose Escalation Schedule",description:"Plan your semaglutide, tirzepatide, or peptide dose escalation. Visual timeline with reminders and export options.",keywords:"titration planner, semaglutide dosing, tirzepatide schedule, dose escalation"}),e.jsx(je,{isPremium:w})]})};export{Ce as default};
